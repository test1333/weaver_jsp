create or replace trigger WORKFLOW_CURRENTOPERATOR_DB
  before UPDATE  of viewtype on Workflow_Currentoperator
  for each row
 when (new.isremark='0 ' and new.viewtype='-2' )
begin
 update ofs_todo_data@dblink_oa set  viewtype=1 where flowid=:old.requestid and receiver=(select loginid from hrmresource where id=:old.userid) and  islasttimes=1 and isremark=0;

end;
